{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/vintd/Documents/GitHub/Reserv/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/vintd/Documents/GitHub/Reserv/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/vintd/Documents/GitHub/Reserv/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import{Link}from'react-router-dom';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Login(){var loginName;var loginPassword;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),message=_useState2[0],setMessage=_useState2[1];var doLogin=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){var obj,js,response,res,user;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:event.preventDefault();obj={login:loginName.value,password:loginPassword.value};js=JSON.stringify(obj);console.log(js);_context.prev=4;_context.next=7;return fetch('http://localhost:5000/api/login',{method:'POST',body:js,headers:{'Content-Type':'application/json'}});case 7:response=_context.sent;_context.t0=JSON;_context.next=11;return response.text();case 11:_context.t1=_context.sent;res=_context.t0.parse.call(_context.t0,_context.t1);if(res.id<=0){setMessage('User/Password combination incorrect');}else{user={firstName:res.firstName,lastName:res.lastName,id:res.id};alert(res.id);localStorage.setItem('user_data',JSON.stringify(user));alert(localStorage.id);setMessage('');window.location.href='/cards';}_context.next=20;break;case 16:_context.prev=16;_context.t2=_context[\"catch\"](4);alert(_context.t2.toString());return _context.abrupt(\"return\");case 20:case\"end\":return _context.stop();}},_callee,null,[[4,16]]);}));return function doLogin(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{id:\"loginDiv\",children:[/*#__PURE__*/_jsxs(\"form\",{onSubmit:doLogin,children:[/*#__PURE__*/_jsx(\"span\",{id:\"inner-title\",children:\"Please Log In\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",class:\"textForm\",id:\"loginName\",placeholder:\"Username\",ref:function ref(c){return loginName=c;},required:true}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",class:\"textForm\",id:\"loginPassword\",placeholder:\"Password\",ref:function ref(c){return loginPassword=c;},required:true}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"input\",{type:\"submit\",id:\"loginButton\",class:\"buttons\",value:\"Login\",onClick:doLogin})]}),/*#__PURE__*/_jsx(\"span\",{id:\"loginResult\",children:message})]});};export default Login;","map":{"version":3,"names":["React","useState","Link","jsx","_jsx","jsxs","_jsxs","Login","loginName","loginPassword","_useState","_useState2","_slicedToArray","message","setMessage","doLogin","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","event","obj","js","response","res","user","wrap","_callee$","_context","prev","next","preventDefault","login","value","password","JSON","stringify","console","log","fetch","method","body","headers","sent","t0","text","t1","parse","call","id","firstName","lastName","alert","localStorage","setItem","window","location","href","t2","toString","abrupt","stop","_x","apply","arguments","children","onSubmit","type","class","placeholder","ref","c","required","onClick"],"sources":["C:/Users/vintd/Documents/GitHub/Reserv/frontend/src/components/Login.js"],"sourcesContent":["import React, { useState } from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nfunction Login()\r\n{\r\n    var loginName;\r\n    var loginPassword;\r\n    const [message,setMessage] = useState('');\r\n    \r\n\r\n    const doLogin = async event =>\r\n    {\r\n        event.preventDefault();\r\n\r\n        var obj = {login:loginName.value,password:loginPassword.value};\r\n        var js = JSON.stringify(obj);\r\n        console.log(js);\r\n        try\r\n        {\r\n            const response = await fetch('http://localhost:5000/api/login',\r\n            {method:'POST',\r\n            body:js,\r\n            headers:{'Content-Type':'application/json'}});\r\n\r\n            var res = JSON.parse(await response.text());\r\n            if( res.id <= 0 )\r\n            {\r\n                setMessage('User/Password combination incorrect');\r\n            }\r\n            else\r\n            {\r\n                var user =\r\n                {firstName:res.firstName,lastName:res.lastName,id:res.id};\r\n                alert(res.id);        \r\n                localStorage.setItem('user_data', JSON.stringify(user));\r\n                alert(localStorage.id);\r\n                setMessage('');\r\n                window.location.href = '/cards';\r\n            }\r\n        }\r\n        catch(e)\r\n        {\r\n            alert(e.toString());\r\n            return;\r\n        }\r\n    };\r\n\r\n    return(\r\n        <div id=\"loginDiv\">\r\n        <form onSubmit={doLogin}>\r\n        <span id=\"inner-title\">Please Log In</span><br />\r\n        <input type=\"text\" class=\"textForm\" id=\"loginName\" placeholder=\"Username\"ref={(c) => loginName = c} required/><br />\r\n        <input type=\"password\" class=\"textForm\" id=\"loginPassword\" placeholder=\"Password\" ref={(c) => loginPassword = c} required /><br />\r\n        <input type=\"submit\" id=\"loginButton\" class=\"buttons\" value = \"Login\" onClick={doLogin} />\r\n        </form>\r\n        <span id=\"loginResult\">{message}</span>\r\n        </div>\r\n    );\r\n};\r\nexport default Login;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}