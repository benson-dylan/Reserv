{"ast":null,"code":"'use client';\n\nimport _slicedToArray from \"C:/Users/vintd/Documents/GitHub/Reserv/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";\nimport { useCallback, useState, useEffect } from 'react';\nimport { useWindowEvent } from '../use-window-event/use-window-event.mjs';\nfunction serializeJSON(value, hookName) {\n  try {\n    return JSON.stringify(value);\n  } catch (error) {\n    throw new Error(\"@mantine/hooks \".concat(hookName, \": Failed to serialize the value\"));\n  }\n}\nfunction deserializeJSON(value) {\n  try {\n    return value && JSON.parse(value);\n  } catch (e) {\n    return value;\n  }\n}\nfunction createStorageHandler(type) {\n  var getItem = function getItem(key) {\n    try {\n      return window[type].getItem(key);\n    } catch (error) {\n      console.warn(\"use-local-storage: Failed to get value from storage, localStorage is blocked\");\n      return null;\n    }\n  };\n  var setItem = function setItem(key, value) {\n    try {\n      window[type].setItem(key, value);\n    } catch (error) {\n      console.warn(\"use-local-storage: Failed to set value to storage, localStorage is blocked\");\n    }\n  };\n  var removeItem = function removeItem(key) {\n    try {\n      window[type].removeItem(key);\n    } catch (error) {\n      console.warn(\"use-local-storage: Failed to remove value from storage, localStorage is blocked\");\n    }\n  };\n  return {\n    getItem: getItem,\n    setItem: setItem,\n    removeItem: removeItem\n  };\n}\nfunction createStorage(type, hookName) {\n  var eventName = type === \"localStorage\" ? \"mantine-local-storage\" : \"mantine-session-storage\";\n  var _createStorageHandler = createStorageHandler(type),\n    getItem = _createStorageHandler.getItem,\n    setItem = _createStorageHandler.setItem,\n    removeItem = _createStorageHandler.removeItem;\n  return function useStorage(_ref) {\n    var key = _ref.key,\n      _ref$defaultValue = _ref.defaultValue,\n      defaultValue = _ref$defaultValue === void 0 ? void 0 : _ref$defaultValue,\n      _ref$getInitialValueI = _ref.getInitialValueInEffect,\n      getInitialValueInEffect = _ref$getInitialValueI === void 0 ? true : _ref$getInitialValueI,\n      _ref$deserialize = _ref.deserialize,\n      deserialize = _ref$deserialize === void 0 ? deserializeJSON : _ref$deserialize,\n      _ref$serialize = _ref.serialize,\n      serialize = _ref$serialize === void 0 ? function (value) {\n        return serializeJSON(value, hookName);\n      } : _ref$serialize;\n    var readStorageValue = useCallback(function (skipStorage) {\n      if (typeof window === \"undefined\" || !(type in window) || window[type] === null || skipStorage) {\n        return defaultValue;\n      }\n      var storageValue = getItem(key);\n      return storageValue !== null ? deserialize(storageValue) : defaultValue;\n    }, [key, defaultValue]);\n    var _useState = useState(readStorageValue(getInitialValueInEffect)),\n      _useState2 = _slicedToArray(_useState, 2),\n      value = _useState2[0],\n      setValue = _useState2[1];\n    var setStorageValue = useCallback(function (val) {\n      if (val instanceof Function) {\n        setValue(function (current) {\n          var result = val(current);\n          setItem(key, serialize(result));\n          window.dispatchEvent(new CustomEvent(eventName, {\n            detail: {\n              key: key,\n              value: val(current)\n            }\n          }));\n          return result;\n        });\n      } else {\n        setItem(key, serialize(val));\n        window.dispatchEvent(new CustomEvent(eventName, {\n          detail: {\n            key: key,\n            value: val\n          }\n        }));\n        setValue(val);\n      }\n    }, [key]);\n    var removeStorageValue = useCallback(function () {\n      removeItem(key);\n      window.dispatchEvent(new CustomEvent(eventName, {\n        detail: {\n          key: key,\n          value: defaultValue\n        }\n      }));\n    }, []);\n    useWindowEvent(\"storage\", function (event) {\n      var _a;\n      if (event.storageArea === window[type] && event.key === key) {\n        setValue(deserialize((_a = event.newValue) != null ? _a : void 0));\n      }\n    });\n    useWindowEvent(eventName, function (event) {\n      if (event.detail.key === key) {\n        setValue(event.detail.value);\n      }\n    });\n    useEffect(function () {\n      if (defaultValue !== void 0 && value === void 0) {\n        setStorageValue(defaultValue);\n      }\n    }, [defaultValue, value, setStorageValue]);\n    useEffect(function () {\n      if (getInitialValueInEffect) {\n        setValue(readStorageValue());\n      }\n    }, []);\n    return [value === void 0 ? defaultValue : value, setStorageValue, removeStorageValue];\n  };\n}\nexport { createStorage };","map":{"version":3,"names":["serializeJSON","value","hookName","JSON","stringify","error","Error","concat","deserializeJSON","parse","e","createStorageHandler","type","getItem","key","window","console","warn","setItem","removeItem","createStorage","eventName","_createStorageHandler","useStorage","_ref","_ref$defaultValue","defaultValue","_ref$getInitialValueI","getInitialValueInEffect","_ref$deserialize","deserialize","_ref$serialize","serialize","readStorageValue","useCallback","skipStorage","storageValue","_useState","useState","_useState2","_slicedToArray","setValue","setStorageValue","val","Function","current","result","dispatchEvent","CustomEvent","detail","removeStorageValue","useWindowEvent","event","_a","storageArea","newValue","useEffect"],"sources":["C:\\Users\\vintd\\Documents\\GitHub\\Reserv\\frontend\\node_modules\\@mantine\\hooks\\src\\use-local-storage\\create-storage.ts"],"sourcesContent":["/* eslint-disable no-console */\nimport { useState, useCallback, useEffect } from 'react';\nimport { useWindowEvent } from '../use-window-event/use-window-event';\n\nexport type StorageType = 'localStorage' | 'sessionStorage';\n\nexport interface StorageProperties<T> {\n  /** Storage key */\n  key: string;\n\n  /** Default value that will be set if value is not found in storage */\n  defaultValue?: T;\n\n  /** If set to true, value will be update is useEffect after mount */\n  getInitialValueInEffect?: boolean;\n\n  /** Function to serialize value into string to be save in storage */\n  serialize?: (value: T) => string;\n\n  /** Function to deserialize string value from storage to value */\n  deserialize?: (value: string | undefined) => T;\n}\n\nfunction serializeJSON<T>(value: T, hookName: string) {\n  try {\n    return JSON.stringify(value);\n  } catch (error) {\n    throw new Error(`@mantine/hooks ${hookName}: Failed to serialize the value`);\n  }\n}\n\nfunction deserializeJSON(value: string | undefined) {\n  try {\n    return value && JSON.parse(value);\n  } catch {\n    return value;\n  }\n}\n\nfunction createStorageHandler(type: StorageType) {\n  const getItem = (key: string) => {\n    try {\n      return window[type].getItem(key);\n    } catch (error) {\n      console.warn('use-local-storage: Failed to get value from storage, localStorage is blocked');\n      return null;\n    }\n  };\n\n  const setItem = (key: string, value: string) => {\n    try {\n      window[type].setItem(key, value);\n    } catch (error) {\n      console.warn('use-local-storage: Failed to set value to storage, localStorage is blocked');\n    }\n  };\n\n  const removeItem = (key: string) => {\n    try {\n      window[type].removeItem(key);\n    } catch (error) {\n      console.warn(\n        'use-local-storage: Failed to remove value from storage, localStorage is blocked'\n      );\n    }\n  };\n\n  return { getItem, setItem, removeItem };\n}\n\nexport function createStorage<T>(type: StorageType, hookName: string) {\n  const eventName = type === 'localStorage' ? 'mantine-local-storage' : 'mantine-session-storage';\n  const { getItem, setItem, removeItem } = createStorageHandler(type);\n\n  return function useStorage({\n    key,\n    defaultValue = undefined,\n    getInitialValueInEffect = true,\n    deserialize = deserializeJSON,\n    serialize = (value: T) => serializeJSON(value, hookName),\n  }: StorageProperties<T>) {\n    const readStorageValue = useCallback(\n      (skipStorage?: boolean): T => {\n        if (\n          typeof window === 'undefined' ||\n          !(type in window) ||\n          window[type] === null ||\n          skipStorage\n        ) {\n          return defaultValue as T;\n        }\n\n        const storageValue = getItem(key);\n        return storageValue !== null ? deserialize(storageValue) : (defaultValue as T);\n      },\n      [key, defaultValue]\n    );\n\n    const [value, setValue] = useState<T>(readStorageValue(getInitialValueInEffect));\n\n    const setStorageValue = useCallback(\n      (val: T | ((prevState: T) => T)) => {\n        if (val instanceof Function) {\n          setValue((current) => {\n            const result = val(current);\n            setItem(key, serialize(result));\n            window.dispatchEvent(\n              new CustomEvent(eventName, { detail: { key, value: val(current) } })\n            );\n            return result;\n          });\n        } else {\n          setItem(key, serialize(val));\n          window.dispatchEvent(new CustomEvent(eventName, { detail: { key, value: val } }));\n          setValue(val);\n        }\n      },\n      [key]\n    );\n\n    const removeStorageValue = useCallback(() => {\n      removeItem(key);\n      window.dispatchEvent(new CustomEvent(eventName, { detail: { key, value: defaultValue } }));\n    }, []);\n\n    useWindowEvent('storage', (event) => {\n      if (event.storageArea === window[type] && event.key === key) {\n        setValue(deserialize(event.newValue ?? undefined));\n      }\n    });\n\n    useWindowEvent(eventName, (event) => {\n      if (event.detail.key === key) {\n        setValue(event.detail.value);\n      }\n    });\n\n    useEffect(() => {\n      if (defaultValue !== undefined && value === undefined) {\n        setStorageValue(defaultValue);\n      }\n    }, [defaultValue, value, setStorageValue]);\n\n    useEffect(() => {\n      if (getInitialValueInEffect) {\n        setValue(readStorageValue());\n      }\n    }, []);\n\n    return [\n      value === undefined ? defaultValue : value,\n      setStorageValue,\n      removeStorageValue,\n    ] as const;\n  };\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}