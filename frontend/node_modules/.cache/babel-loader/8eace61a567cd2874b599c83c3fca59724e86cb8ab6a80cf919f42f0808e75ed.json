{"ast":null,"code":"'use client';\n\nimport dayjs from 'dayjs';\nimport { useState } from 'react';\nimport { useUncontrolledDates } from '../use-uncontrolled-dates/use-uncontrolled-dates.mjs';\nimport { isInRange } from './is-in-range/is-in-range.mjs';\nfunction useDatesState({\n  type,\n  level,\n  value,\n  defaultValue,\n  onChange,\n  allowSingleDateInRange,\n  allowDeselect,\n  onMouseLeave,\n  applyTimezone = true\n}) {\n  const [_value, setValue] = useUncontrolledDates({\n    type,\n    value,\n    defaultValue,\n    onChange,\n    applyTimezone\n  });\n  const [pickedDate, setPickedDate] = useState(type === \"range\" ? _value[0] && !_value[1] ? _value[0] : null : null);\n  const [hoveredDate, setHoveredDate] = useState(null);\n  const onDateChange = date => {\n    if (type === \"range\") {\n      if (pickedDate instanceof Date && !_value[1]) {\n        if (dayjs(date).isSame(pickedDate, level) && !allowSingleDateInRange) {\n          setPickedDate(null);\n          setHoveredDate(null);\n          setValue([null, null]);\n          return;\n        }\n        const result = [date, pickedDate];\n        result.sort((a, b) => a.getTime() - b.getTime());\n        setValue(result);\n        setHoveredDate(null);\n        setPickedDate(null);\n        return;\n      }\n      if (_value[0] && !_value[1] && dayjs(date).isSame(_value[0], level) && !allowSingleDateInRange) {\n        setPickedDate(null);\n        setHoveredDate(null);\n        setValue([null, null]);\n        return;\n      }\n      setValue([date, null]);\n      setHoveredDate(null);\n      setPickedDate(date);\n      return;\n    }\n    if (type === \"multiple\") {\n      if (_value.some(selected => dayjs(selected).isSame(date, level))) {\n        setValue(_value.filter(selected => !dayjs(selected).isSame(date, level)));\n      } else {\n        setValue([..._value, date]);\n      }\n      return;\n    }\n    if (_value && allowDeselect && dayjs(date).isSame(_value, level)) {\n      setValue(null);\n    } else {\n      setValue(date);\n    }\n  };\n  const isDateInRange = date => {\n    if (pickedDate instanceof Date && hoveredDate instanceof Date) {\n      return isInRange(date, [hoveredDate, pickedDate]);\n    }\n    if (_value[0] instanceof Date && _value[1] instanceof Date) {\n      return isInRange(date, _value);\n    }\n    return false;\n  };\n  const onRootMouseLeave = type === \"range\" ? event => {\n    onMouseLeave == null ? void 0 : onMouseLeave(event);\n    setHoveredDate(null);\n  } : onMouseLeave;\n  const isFirstInRange = date => {\n    if (!(_value[0] instanceof Date)) {\n      return false;\n    }\n    if (dayjs(date).isSame(_value[0], level)) {\n      return !(hoveredDate && dayjs(hoveredDate).isBefore(_value[0]));\n    }\n    return false;\n  };\n  const isLastInRange = date => {\n    if (_value[1] instanceof Date) {\n      return dayjs(date).isSame(_value[1], level);\n    }\n    if (!(_value[0] instanceof Date) || !hoveredDate) {\n      return false;\n    }\n    return dayjs(hoveredDate).isBefore(_value[0]) && dayjs(date).isSame(_value[0], level);\n  };\n  const getControlProps = date => {\n    if (type === \"range\") {\n      return {\n        selected: _value.some(selection => selection && dayjs(selection).isSame(date, level)),\n        inRange: isDateInRange(date),\n        firstInRange: isFirstInRange(date),\n        lastInRange: isLastInRange(date),\n        \"data-autofocus\": !!_value[0] && dayjs(_value[0]).isSame(date, level) || void 0\n      };\n    }\n    if (type === \"multiple\") {\n      return {\n        selected: _value.some(selection => selection && dayjs(selection).isSame(date, level)),\n        \"data-autofocus\": !!_value[0] && dayjs(_value[0]).isSame(date, level) || void 0\n      };\n    }\n    const selected = dayjs(_value).isSame(date, level);\n    return {\n      selected,\n      \"data-autofocus\": selected || void 0\n    };\n  };\n  const onHoveredDateChange = type === \"range\" && pickedDate ? setHoveredDate : () => {};\n  return {\n    onDateChange,\n    onRootMouseLeave,\n    onHoveredDateChange,\n    getControlProps,\n    _value,\n    setValue\n  };\n}\nexport { useDatesState };","map":{"version":3,"names":["useDatesState","type","level","value","defaultValue","onChange","allowSingleDateInRange","allowDeselect","onMouseLeave","applyTimezone","_value","setValue","useUncontrolledDates","pickedDate","setPickedDate","useState","hoveredDate","setHoveredDate","onDateChange","date","Date","dayjs","isSame","result","sort","a","b","getTime","some","selected","filter","isDateInRange","isInRange","onRootMouseLeave","event","isFirstInRange","isBefore","isLastInRange","getControlProps","selection","inRange","firstInRange","lastInRange","onHoveredDateChange"],"sources":["C:\\Users\\dylan\\GitHub\\Reserv\\frontend\\node_modules\\@mantine\\dates\\src\\hooks\\use-dates-state\\use-dates-state.ts"],"sourcesContent":["import dayjs from 'dayjs';\nimport { useState } from 'react';\nimport { DatePickerType, PickerBaseProps } from '../../types';\nimport { useUncontrolledDates } from '../use-uncontrolled-dates/use-uncontrolled-dates';\nimport { isInRange } from './is-in-range/is-in-range';\n\ninterface UseDatesRangeInput<Type extends DatePickerType = 'default'>\n  extends PickerBaseProps<Type> {\n  level: 'year' | 'month' | 'day';\n  type: Type;\n  onMouseLeave?: (event: React.MouseEvent<HTMLDivElement>) => void;\n  applyTimezone?: boolean;\n}\n\nexport function useDatesState<Type extends DatePickerType = 'default'>({\n  type,\n  level,\n  value,\n  defaultValue,\n  onChange,\n  allowSingleDateInRange,\n  allowDeselect,\n  onMouseLeave,\n  applyTimezone = true,\n}: UseDatesRangeInput<Type>) {\n  const [_value, setValue] = useUncontrolledDates({\n    type,\n    value,\n    defaultValue,\n    onChange,\n    applyTimezone,\n  });\n\n  const [pickedDate, setPickedDate] = useState<Date | null>(\n    type === 'range' ? (_value[0] && !_value[1] ? _value[0] : null) : null\n  );\n  const [hoveredDate, setHoveredDate] = useState<Date | null>(null);\n\n  const onDateChange = (date: Date) => {\n    if (type === 'range') {\n      if (pickedDate instanceof Date && !_value[1]) {\n        if (dayjs(date).isSame(pickedDate, level) && !allowSingleDateInRange) {\n          setPickedDate(null);\n          setHoveredDate(null);\n          setValue([null, null]);\n          return;\n        }\n\n        const result: [Date, Date] = [date, pickedDate];\n        result.sort((a, b) => a.getTime() - b.getTime());\n        setValue(result);\n        setHoveredDate(null);\n        setPickedDate(null);\n        return;\n      }\n\n      if (\n        _value[0] &&\n        !_value[1] &&\n        dayjs(date).isSame(_value[0], level) &&\n        !allowSingleDateInRange\n      ) {\n        setPickedDate(null);\n        setHoveredDate(null);\n        setValue([null, null]);\n        return;\n      }\n\n      setValue([date, null]);\n      setHoveredDate(null);\n      setPickedDate(date);\n      return;\n    }\n\n    if (type === 'multiple') {\n      if (_value.some((selected: Date) => dayjs(selected).isSame(date, level))) {\n        setValue(_value.filter((selected: Date) => !dayjs(selected).isSame(date, level)));\n      } else {\n        setValue([..._value, date]);\n      }\n\n      return;\n    }\n\n    if (_value && allowDeselect && dayjs(date).isSame(_value, level)) {\n      setValue(null);\n    } else {\n      setValue(date);\n    }\n  };\n\n  const isDateInRange = (date: Date) => {\n    if (pickedDate instanceof Date && hoveredDate instanceof Date) {\n      return isInRange(date, [hoveredDate, pickedDate]);\n    }\n\n    if (_value[0] instanceof Date && _value[1] instanceof Date) {\n      return isInRange(date, _value);\n    }\n\n    return false;\n  };\n\n  const onRootMouseLeave =\n    type === 'range'\n      ? (event: React.MouseEvent<HTMLDivElement>) => {\n          onMouseLeave?.(event);\n          setHoveredDate(null);\n        }\n      : onMouseLeave;\n\n  const isFirstInRange = (date: Date) => {\n    if (!(_value[0] instanceof Date)) {\n      return false;\n    }\n\n    if (dayjs(date).isSame(_value[0], level)) {\n      return !(hoveredDate && dayjs(hoveredDate).isBefore(_value[0]));\n    }\n\n    return false;\n  };\n\n  const isLastInRange = (date: Date) => {\n    if (_value[1] instanceof Date) {\n      return dayjs(date).isSame(_value[1], level);\n    }\n\n    if (!(_value[0] instanceof Date) || !hoveredDate) {\n      return false;\n    }\n\n    return dayjs(hoveredDate).isBefore(_value[0]) && dayjs(date).isSame(_value[0], level);\n  };\n\n  const getControlProps = (date: Date) => {\n    if (type === 'range') {\n      return {\n        selected: _value.some(\n          (selection: Date) => selection && dayjs(selection).isSame(date, level)\n        ),\n        inRange: isDateInRange(date),\n        firstInRange: isFirstInRange(date),\n        lastInRange: isLastInRange(date),\n        'data-autofocus': (!!_value[0] && dayjs(_value[0]).isSame(date, level)) || undefined,\n      };\n    }\n\n    if (type === 'multiple') {\n      return {\n        selected: _value.some(\n          (selection: Date) => selection && dayjs(selection).isSame(date, level)\n        ),\n        'data-autofocus': (!!_value[0] && dayjs(_value[0]).isSame(date, level)) || undefined,\n      };\n    }\n\n    const selected = dayjs(_value).isSame(date, level);\n    return { selected, 'data-autofocus': selected || undefined };\n  };\n\n  const onHoveredDateChange = type === 'range' && pickedDate ? setHoveredDate : () => {};\n\n  return {\n    onDateChange,\n    onRootMouseLeave,\n    onHoveredDateChange,\n    getControlProps,\n    _value,\n    setValue,\n  };\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}